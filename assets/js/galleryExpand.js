/*!
 * Gallery v1.0.3
 * Materialize theme
 * http://materializecss.com/themes.html
 * Personal Use License
 * by Alan Chang
 */
!function(t,e){var n={init:function(n){var i={inDuration:300,outDuration:200,responsiveThreshold:992,contentPadding:40,onShow:null,defaultColor:"#444",primaryColor:"",secondaryColor:"",fillScreen:!1,dynamicRouting:!1};n=t.extend(i,n);var r=window.location.hash.substring(1);return this.each(function(i){function a(){if(z){z=!1,U&&(window.location.hash="!",window.onpopstate=null);var n=!L;window.clearTimeout(B),B=null,X.stop(),L=!0,k=undefined;var i=t("#placeholder-overlay").first();i.off("click.galleryExpand").off("mouseenter.galleryExpand").off("mouseleave.galleryExpand"),s.scrollTop(0),s.attr("style",S.attr("style")),Y.css("left",S.find(".gallery-cover").css("left")).removeClass("static hover"),ot(),t("body").css("overflow",""),s.css("overflowY",""),i.css({transition:"none",opacity:.9}),j.show(),setTimeout(function(){if(t(window).off("resize",I),P.find(".gallery-body").css("display","none"),_&&_.find($).removeClass("active"),t("nav").removeClass("fadeOut"),e({targets:t("#placeholder-navbar")[0],opacity:0,duration:G,easing:"easeInQuad",complete:function(){t("#placeholder-navbar").remove()}}),O=!1,e({targets:i[0],opacity:0,duration:G,easing:"easeInQuad",complete:function(){i.remove()}}),!n){P.css({width:l,height:d,transform:"translate3d(0,0,0)",transition:"transform "+G/1e3+"s "+et,"-webkit-transition":"-webkit-transform "+G/1e3+"s "+et});var r=m.top-Z-tt;F.css({transform:"translate3d(0, "+r+"px, 0)",transition:"transform "+G/1e3+"s","-webkit-transition":"-webkit-transform "+G/1e3+"s"});var a={};W&&N?(a.width=p,a.height=u,a.transform="translate3d("+m.left+"px, "+tt+"px, 0)",a.transition="transform "+G/1e3+"s, width "+G/1e3+"s, height "+G/1e3+"s",a["-webkit-transition"]="-webkit-transform "+G/1e3+"s, width "+G/1e3+"s, height "+G/1e3+"s",at.css({background:""})):(a.transform="translate3d("+(m.left-H-tt)+"px, 0, 0)",a.transition="transform "+G/1e3+"s "+et,a["-webkit-transition"]="-webkit-transform "+G/1e3+"s "+et),Y.css(a),j.css({transform:"translate3d("+c.left+"px,"+g+"px,0)",transition:"transform "+G/1e3+"s","-webkit-transition":"-webkit-transform "+G/1e3+"s"})}B=setTimeout(function(){s.removeAttr("style"),P.css({width:"",height:"",overflow:"","z-index":"",transform:"",transition:"","-webkit-transition":""}),Y.removeAttr("style").attr("style",A),F.removeAttr("style"),j.removeAttr("style"),j.children().removeAttr("style"),X.find(".title-wrapper").css({marginTop:"",marginLeft:"",paddingLeft:"",height:""}),P.removeClass("active"),D=!0,t(".gallery").data("masonry")&&t(".gallery").masonry("layout")},G)},0)}}var o,s,l,d,c,h,f,g,p,u,m,v,y,w,b,k,x,C,E,T,R,H,I,B,S,A,D=!0,z=!1,O=!1,L=!0,P=t(this),Q=P.attr("id")||i.toString(),Y=P.find(".gallery-cover"),j=P.find(".gallery-header"),F=P.find(".gallery-curve-wrapper"),X=P.find(".gallery-body"),_=P.find(".gallery-action"),q=parseInt(t(this).attr("data-in-duration"))||n.inDuration,G=parseInt(t(this).attr("data-out-duration"))||n.outDuration,J=parseInt(t(this).attr("data-responsive-threshold"))||n.responsiveThreshold,K=parseInt(t(this).attr("data-content-padding"))||n.contentPadding,T=t(this).attr("data-primary-color")||n.primaryColor,R=t(this).attr("data-secondary-color")||n.secondaryColor,N=!!Y.length&&(t(this).attr("data-fill-screen")||n.fillScreen),U=t(this).attr("data-dynamic-routing")||n.dynamicRouting,V=t(this).hasClass("gallery-horizontal"),W=!1,Z=64,$=".btn, .btn-large, .btn-floating",tt=K,et="cubic-bezier(0.420, 0.000, 0.580, 1.000)",nt=t(document).width(),it=window.innerHeight,rt=!1;s=P.children(".placeholder").first(),s.length||(P.wrapInner(t('<div class="placeholder"></div>')),s=P.children(".placeholder").first()),j.length||(j=t('<div class="gallery-header invisible"></div>'),Y.length?Y.after(j):F.append(j));var at=Y.find(".gradient").first();N&&(at.length||(at=t('<div class="gradient"></div>'),Y.append(at)),P.attr("data-fillscreen",!0));var ot=function(){Y=P.find(".gallery-cover"),j=P.find(".gallery-header"),F=P.find(".gallery-curve-wrapper"),X=P.find(".gallery-body"),_=P.find(".gallery-action"),s=P.find(".placeholder")},st=function(){origContainerRect=P[0].getBoundingClientRect(),l=origContainerRect.width,d=P.height(),c=j[0].getBoundingClientRect(),h=c.width,f=c.height||1,p=Y.width(),u=Y.height(),m=Y.length?Y[0].getBoundingClientRect():{top:c.top,left:0},v=t(window).scrollTop()};if(P.off("click.galleryExpand").on("click.galleryExpand",function(e){if(D){var i=t(e.target);if(!i.attr("data-stop-propagation")&&!i.closest('[data-stop-propagation="true"]').length){D=!1,window.clearTimeout(B),B=null,st(),U&&(window.location.hash=Q,window.onpopstate=function(){z&&a()});var r,v,G,ot,lt,dt=function(){nt=t(document).width(),it=window.innerHeight,o=nt<=J,W=p>nt/2||N,rt=document.body.scrollHeight>document.body.clientHeight;var e=document.body.currentStyle||window.getComputedStyle(document.body,"");if(rt=rt&&("visible"==e.overflow||"visible"==e.overflowY||"auto"==e.overflow||"auto"==e.overflowY),Z=o?56:64,b=-P[0].getBoundingClientRect().top,k=k===undefined?-s[0].getBoundingClientRect().left:k+-s[0].getBoundingClientRect().left,tt=o?20:K,x=Math.round(u/2+tt+Z),r=u/2-tt,v=.7*nt,G=it-r-Z,H=Math.max((nt-v)/2,tt),o&&(v=nt,H=0),W)if(N){var n=Y.children("img").first(),i=imgHeight=Infinity;if(n.length){var a=n[0].getBoundingClientRect();i=a.width,imgHeight=a.height}y=Math.min(nt,i),w=Math.min(it-Z,imgHeight),x=o?Math.round((it-Z)/2):Math.round(3*tt+Z),r=w-x+Z,G=it-x}else{var c=l/d;y=nt/2,w=y/c,x=Math.round(w/2)+tt+Z,r=w/2+tt,G=it-r-Z}ot=v/h,lt=G/f};if(dt(),S=s.clone(!0),t("body").css("overflowX","hidden"),t("body").on("scroll.disable-scroll mousewheel.disable-scroll touchmove.disable-scroll",function(t){return t.preventDefault(),t.stopPropagation(),!1}),P.css({height:d,width:l}),Y.length){A=Y.attr("style");var ct="translate3d(";N?ct+=m.left+"px, "+tt+"px, 0)":(Y.css({left:H+tt,top:tt}),ct+=m.left-H-tt+"px, 0, 0)"),Y.css({height:u,width:p,transform:ct})}var ht=m.top-Z-tt;F.css({display:"block",transform:"translate3d(0, "+ht+"px, 0)"}),g=V?tt-f:tt,j.css({height:f,width:h,transform:"translate3d("+c.left+"px,"+g+"px,0)"}),s.css({height:it,width:nt,transform:"translate3d("+Math.round(k)+"px, "+Math.round(b)+"px, 0)"}),P.addClass("active"),"absolute"!==P.css("position")&&P.css({position:"relative"}),O=!0,L=!1;var ft=t("#placeholder-overlay");ft.length||(ft=t('<div id="placeholder-overlay"></div>'),s.prepend(ft)),ft.off("click.galleryExpand").on("click.galleryExpand",function(){a()}),N&&ft.off("mouseenter.galleryExpand").off("mouseleave.galleryExpand").on("mouseenter.galleryExpand",function(){Y.addClass("hover")}).on("mouseleave.galleryExpand",function(){Y.removeClass("hover")}),setTimeout(function(){ft.addClass("visible")},0);var gt=t('<nav id="placeholder-navbar"></nav>'),pt=t('<div class="nav-wrapper"></div>'),ut=t('<div class="container"></div>'),mt=t('<button class="back-btn"><i class="material-icons">arrow_back</i><span>Back</span></button>'),vt="";if(t("nav").length&&(vt=t("nav").css("background-color"),t("nav").addClass("fadeOut")),gt.css({"background-color":vt}),ut.append(mt),pt.append(ut),gt.append(pt),s.prepend(gt),mt.click(function(){a()}),"undefined"!=typeof ColorThief&&Y.length){C=new ColorThief;var yt=new Image;yt.onload=function(){C.getColor(yt)},yt.crossOrigin="Anonymous",yt.src=P.find("img").attr("src");try{E=C.getPalette(P.find("img")[0],2),T=T||"rgb("+E[0][0]+","+E[0][1]+","+E[0][2]+")",R=R||"rgb("+E[1][0]+","+E[1][1]+","+E[1][2]+")",gt.css({backgroundColor:R})}catch(e){console.log("Cross Origin error. Falling back to defaultColor. Try using a locally hosted image",e);var wt=t("body").children("canvas:last-child");if(wt.length){var bt=imgHeight=0,yt=Y.children("img").first();if(yt.length){var kt=yt[0].getBoundingClientRect();bt=Math.round(kt.width),imgHeight=Math.round(kt.height)}wt[0].getContext("2d").canvas.width===bt&&wt[0].getContext("2d").canvas.height===imgHeight&&wt.remove()}}}T=T||n.defaultColor,ft.css({backgroundColor:T}),N&&at.length&&at.css({background:"linear-gradient(to bottom, rgba(0,0,0,0) 0%, "+T+" 100%)"});var xt={};if(xt.transform="",xt.transition="transform "+q/1e3+"s",xt["-webkit-transition"]="-webkit-transform "+q/1e3+"s",W)if(N){xt.width=y,xt.height=w,xt.transition="transform "+q/1e3+"s, width "+q/1e3+"s, height "+q/1e3+"s",xt["-webkit-transition"]="-webkit-transform "+q/1e3+"s, width "+q/1e3+"s, height "+q/1e3+"s";y<nt&&(xt.transform="scale("+nt/y+")")}else xt.transform="scale("+y/p+")";Y.css(xt),F.css({height:it,transition:"transform "+q/1e3+"s "+et,"-webkit-transition":"-webkit-transform "+q/1e3+"s "+et,transform:""}),j.children().css("opacity",0);(function(){var t=H/ot,e=-r/lt;W&&!N&&(e=(r-u)/lt),j.css({transition:"transform "+q/1e3+"s "+et,"-webkit-transition":"-webkit-transform "+q/1e3+"s "+et,transform:"scale("+ot+","+lt+") translate3d("+t+"px,"+e+"px,0)",transformOrigin:"0 0"})})(),X.length&&(X.css({marginTop:x,padding:tt,minHeight:it-x}),!N&&Y.length&&(o?X.find(".title-wrapper").css({marginTop:x/2}):X.find(".title-wrapper").css({marginLeft:p,paddingLeft:tt,height:r}))),_.length&&(_.css({top:x}),_.find($).each(function(){t(this).css({backgroundColor:R})})),I=M.throttle(function(){dt()},150),t(window).resize(I),B=setTimeout(function(){_.length&&_.find($).each(function(){t(this).addClass("active")});var e=function(){S=s.clone(!0),s.css({transform:"",position:"fixed",width:"100%",height:"100%",top:0,left:0,overflow:"auto"}),rt&&(t("body").css("overflow","hidden"),s.css("overflowY","scroll")),t("body").off("scroll.disable-scroll mousewheel.disable-scroll touchmove.disable-scroll"),F.css({height:"100%"}),N?Y.css({width:"",height:"",transform:"",transition:"opacity .3s"}):Y.css({left:tt}),Y.addClass("static"),j.hide()};X.length?X.fadeIn(n.inDuration,function(){e()}):e(),L=!0,z=!0,"function"==typeof n.onShow&&n.onShow.call(this,P)},q)}}}),t(document).keyup(function(t){27===t.keyCode&&O&&a()}),U&&r===Q){var lt=Y.children("img").first();lt.length?lt.on("load",function(){P.trigger("click.galleryExpand")}).attr("src",lt.attr("src")):P.trigger("click.galleryExpand")}})},open:function(){t(this).trigger("click.galleryExpand")},close:function(){var e=t("#placeholder-overlay");e.length&&e.trigger("click.galleryExpand")}};t.fn.galleryExpand=function(e){return n[e]?n[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.galleryExpand"):n.init.apply(this,arguments)}}(jQuery,M.anime);